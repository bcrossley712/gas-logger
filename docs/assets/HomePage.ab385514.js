import{q as x,c as f,o as a,b as l,d as o,t as d,F as _,s as u}from"./vendor.3c3a4a42.js";import{A as c,_ as T,l as v,P as g}from"./index.97ff3d88.js";function S(){return(new Date().getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16)).toLowerCase()}class k{constructor(e){this.id=e.id||S(),this.dateTime=e.dateTime,this.complete=e.complete||!1}}class y{addTrip(){const e=new k({dateTime:new Date().toLocaleString()});c.trips=[...c.trips,e],this.saveLocal()}checkTrip(e){const r=c.trips.find(i=>i.id==e);r.complete=!r.complete,this.saveLocal()}deleteTrip(e){const r=c.trips.findIndex(i=>i.id==e);c.trips.splice(r,1),this.saveLocal()}saveLocal(){localStorage.setItem("gas-logger",JSON.stringify({trips:c.trips}))}loadLocal(){let e=JSON.parse(localStorage.getItem("gas-logger"));console.log("loaded data",e),e!=null&&(c.trips=e.trips.map(r=>new k(r)))}}const n=new y,b={setup(){return x(()=>{try{n.loadLocal()}catch(t){v.error(t),g.toast(t.message,"error")}}),{trips:f(()=>c.trips),unpaidTrips:f(()=>c.trips.filter(t=>t.complete==!1)),addTrip(){n.addTrip()},checkTrip(t){n.checkTrip(t)},async deleteTrip(t){await g.confirm()&&n.deleteTrip(t)}}}},w={class:"container-fluid"},L={class:"row"},C={class:"col-12 p-3"},D={class:"me-3"},I={class:"col-12"},P={class:"form-check form-check-inline"},A=["id","onClick"],B=["id","onClick"],N=["for"],V=["onClick"];function j(t,e,r,i,F,J){var p,m;return a(),l("div",w,[o("div",L,[o("div",C,[o("button",{class:"btn btn-success me-3",onClick:e[0]||(e[0]=(...s)=>i.addTrip&&i.addTrip(...s))},"Add trip"),o("span",D,"Trips = "+d((p=i.trips)==null?void 0:p.length),1),o("span",null,"Peyton owes = $"+d(((m=i.unpaidTrips)==null?void 0:m.length)*2),1)]),o("div",I,[(a(!0),l(_,null,u(i.trips,s=>(a(),l("div",{class:"d-flex align-items-center p-2",key:s},[o("div",P,[s.complete?(a(),l("input",{key:0,type:"checkbox",class:"form-check-input",name:"",id:s.id,value:"checkedValue",checked:"",onClick:h=>i.checkTrip(s.id)},null,8,A)):(a(),l("input",{key:1,type:"checkbox",class:"form-check-input",name:"",id:s.id,value:"checkedValue",onClick:h=>i.checkTrip(s.id)},null,8,B)),o("label",{class:"form-check-label",for:s.id},d(s.dateTime),9,N)]),o("i",{class:"mdi mdi-delete-forever text-danger selectable",title:"Delete trip",onClick:h=>i.deleteTrip(s.id)},null,8,V)]))),128))])])])}var q=T(b,[["render",j]]);export{q as default};
