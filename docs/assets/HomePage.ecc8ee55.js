import{q as g,c as f,o as l,b as c,d as o,t as d,F as k,s as u}from"./vendor.3c3a4a42.js";import{A as a,_ as x,l as _,P as h}from"./index.5bfb28a5.js";function v(){return(new Date().getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16)).toLowerCase()}class T{constructor(e){this.id=e.id||v(),this.dateTime=e.dateTime,this.complete=e.complete||!1,this.halfTrip=e.halfTrip||!1}}class b{addTrip(e){const i=new T(e);a.trips=[...a.trips,i],this.saveLocal()}checkTrip(e){const i=a.trips.find(s=>s.id==e);i.complete=!i.complete,this.saveLocal()}deleteTrip(e){const i=a.trips.findIndex(s=>s.id==e);a.trips.splice(i,1),this.saveLocal()}saveLocal(){localStorage.setItem("gas-logger",JSON.stringify({trips:a.trips}))}loadLocal(){let e=JSON.parse(localStorage.getItem("gas-logger"));console.log("loaded data",e),e!=null&&(a.trips=e.trips.map(i=>new T(i)))}}const n=new b,S={setup(){return g(()=>{try{n.loadLocal()}catch(t){_.error(t),h.toast(t.message,"error")}}),{trips:f(()=>a.trips),unpaidTrips:f(()=>{const t=a.trips.filter(i=>i.complete==!1&&i.halfTrip==!1).length*2,e=a.trips.filter(i=>i.complete==!1&&i.halfTrip==!0).length;return t+e}),addTrip(){const t={dateTime:new Date().toLocaleString()};n.addTrip(t)},halfTrip(){const t={dateTime:new Date().toLocaleString(),halfTrip:!0};n.addTrip(t)},checkTrip(t){n.checkTrip(t)},async deleteTrip(t){await h.confirm()&&n.deleteTrip(t)}}}},w={class:"container-fluid"},y={class:"row"},L={class:"col-12 p-3"},C={class:"me-3"},D={class:"col-12"},I={class:"form-check form-check-inline"},P=["id","onClick"],A=["id","onClick"],B=["for"],N=["onClick"];function V(t,e,i,s,j,F){var p;return l(),c("div",w,[o("div",y,[o("div",L,[o("button",{class:"btn btn-success me-3",onClick:e[0]||(e[0]=(...r)=>s.addTrip&&s.addTrip(...r))},"Add trip"),o("button",{class:"btn btn-success me-3",onClick:e[1]||(e[1]=(...r)=>s.halfTrip&&s.halfTrip(...r))}," Half Trip "),o("span",C,"Trips = "+d((p=s.trips)==null?void 0:p.length),1),o("span",null,"Peyton owes = $"+d(s.unpaidTrips),1)]),o("div",D,[(l(!0),c(k,null,u(s.trips,r=>(l(),c("div",{class:"d-flex align-items-center p-2",key:r},[o("div",I,[r.complete?(l(),c("input",{key:0,type:"checkbox",class:"form-check-input",name:"",id:r.id,value:"checkedValue",checked:"",onClick:m=>s.checkTrip(r.id)},null,8,P)):(l(),c("input",{key:1,type:"checkbox",class:"form-check-input",name:"",id:r.id,value:"checkedValue",onClick:m=>s.checkTrip(r.id)},null,8,A)),o("label",{class:"form-check-label",for:r.id},d(r.dateTime),9,B)]),o("i",{class:"mdi mdi-delete-forever text-danger selectable",title:"Delete trip",onClick:m=>s.deleteTrip(r.id)},null,8,N)]))),128))])])])}var M=x(S,[["render",V]]);export{M as default};
